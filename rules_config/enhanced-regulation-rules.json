{
  "rules": [
    {
      "id": "ADA_DOOR_MIN_CLEAR_WIDTH",
      "name": "ADA Accessible Door Minimum Clear Width",
      "rule_type": "attribute_comparison",
      "description": "Door openings on accessible routes must provide a minimum clear width of 815 mm (32 inches) in accordance with ADA 2010 Standards Section 404.2.3.",
      "target": {
        "ifc_class": "IfcDoor",
        "selector": {
          "filters": [
            {
              "pset": "Pset_DoorCommon",
              "property": "IsAccessible",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_DoorBaseQuantities",
          "quantity": "ClearWidth",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_clear_width_mm"
        }
      },
      "parameters": {
        "min_clear_width_mm": 815
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Accessible doors on accessible routes must have a clear opening width of at least 815 mm (32 in).",
        "on_fail": "Door {guid} is marked as accessible but has clear width {lhs} mm, below the required {rhs} mm (ADA 404.2.3).",
        "on_pass": "Door {guid} meets the ADA minimum clear width requirement ({lhs} mm \u2265 {rhs} mm, ADA 404.2.3)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "2010 ADA Standards for Accessible Design",
        "section": "404.2.3",
        "title": "Clear Width",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "ADA"
        ]
      }
    },
    {
      "id": "IBC_FIRE_EXIT_DOOR_HEIGHT",
      "name": "Fire Exit Door Minimum Height",
      "rule_type": "attribute_comparison",
      "description": "Doors in a means of egress must have a minimum clear height of 2032 mm (80 inches) to ensure safe emergency egress, in accordance with IBC Section 1010.1.1.",
      "target": {
        "ifc_class": "IfcDoor",
        "selector": {
          "filters": [
            {
              "pset": "Pset_DoorCommon",
              "property": "FireExit",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_DoorBaseQuantities",
          "quantity": "Height",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_exit_height_mm"
        }
      },
      "parameters": {
        "min_exit_height_mm": 2032
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Fire exit doors must provide a clear height of at least 2032 mm (80 in).",
        "on_fail": "Fire exit door {guid} has height {lhs} mm, below the required {rhs} mm (IBC 1010.1.1).",
        "on_pass": "Fire exit door {guid} meets the IBC minimum height requirement ({lhs} mm \u2265 {rhs} mm, IBC 1010.1.1)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "International Building Code (IBC) 2018",
        "section": "1010.1.1",
        "title": "Door Size",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "IBC"
        ]
      }
    },
    {
      "id": "IBC_STAIR_MIN_WIDTH",
      "name": "Stair Minimum Width",
      "rule_type": "attribute_comparison",
      "description": "Stairways serving an occupant load of 50 or more must have a minimum clear width of 1118 mm (44 inches) in accordance with IBC Section 1011.2.",
      "target": {
        "ifc_class": "IfcStairFlight",
        "selector": {
          "filters": []
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_StairFlightBaseQuantities",
          "quantity": "Width",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_stair_width_mm"
        }
      },
      "parameters": {
        "min_stair_width_mm": 1118
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Stairways (for typical occupant loads) must have a minimum clear width of 1118 mm (44 in).",
        "on_fail": "Stair flight {guid} has width {lhs} mm, below the required {rhs} mm (IBC 1011.2).",
        "on_pass": "Stair flight {guid} meets the IBC minimum width requirement ({lhs} mm \u2265 {rhs} mm, IBC 1011.2)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "International Building Code (IBC) 2018",
        "section": "1011.2",
        "title": "Width and Capacity",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "IBC"
        ]
      }
    },
    {
      "id": "IRC_BEDROOM_MIN_AREA",
      "name": "Bedroom Minimum Floor Area",
      "rule_type": "attribute_comparison",
      "description": "Habitable rooms such as bedrooms must have a minimum floor area of 6.5 m\u00b2 (70 ft\u00b2) in accordance with IRC Section R304.1/R304.2.",
      "target": {
        "ifc_class": "IfcSpace",
        "selector": {
          "filters": [
            {
              "pset": "Pset_SpaceCommon",
              "property": "UsageType",
              "op": "=",
              "value": "Bedroom"
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_SpaceBaseQuantities",
          "quantity": "FloorArea",
          "unit": "m2"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_bedroom_area_m2"
        }
      },
      "parameters": {
        "min_bedroom_area_m2": 6.5
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Bedrooms must have a minimum floor area of 6.5 m\u00b2 (70 ft\u00b2).",
        "on_fail": "Bedroom space {guid} has area {lhs} m\u00b2, below the required {rhs} m\u00b2 (IRC R304.1/R304.2).",
        "on_pass": "Bedroom space {guid} meets the minimum floor area requirement ({lhs} m\u00b2 \u2265 {rhs} m\u00b2, IRC R304.1/R304.2)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "International Residential Code (IRC) 2021",
        "section": "R304.1 / R304.2",
        "title": "Minimum Room Areas",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "IRC"
        ]
      }
    },
    {
      "id": "IRC_EGRESS_WINDOW_MIN_AREA",
      "name": "Emergency Escape and Rescue Opening – Minimum Area",
      "rule_type": "attribute_comparison",
      "description": "Emergency escape and rescue openings (egress windows) must provide a minimum net clear opening area of 0.53 m\u00b2 (5.7 ft\u00b2) in accordance with IRC Section R310.2.1.",
      "target": {
        "ifc_class": "IfcWindow",
        "selector": {
          "filters": [
            {
              "pset": "Pset_WindowCommon",
              "property": "IsEgress",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_WindowBaseQuantities",
          "quantity": "Area",
          "unit": "m2"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_egress_area_m2"
        }
      },
      "parameters": {
        "min_egress_area_m2": 0.53
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Egress windows must provide a minimum net clear opening area of 0.53 m\u00b2 (5.7 ft\u00b2).",
        "on_fail": "Egress window {guid} has clear opening area {lhs} m\u00b2, below the required {rhs} m\u00b2 (IRC R310.2.1).",
        "on_pass": "Egress window {guid} meets the minimum clear opening area ({lhs} m\u00b2 \u2265 {rhs} m\u00b2, IRC R310.2.1)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "International Residential Code (IRC) 2021",
        "section": "R310.2.1",
        "title": "Minimum Opening Area",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "IRC"
        ]
      }
    },
    {
      "id": "IRC_EGRESS_WINDOW_MIN_HEIGHT",
      "name": "Emergency Escape and Rescue Opening – Minimum Height",
      "rule_type": "attribute_comparison",
      "description": "Emergency escape and rescue openings must provide a minimum net clear opening height of 610 mm (24 inches) in accordance with IRC Section R310.2.2.",
      "target": {
        "ifc_class": "IfcWindow",
        "selector": {
          "filters": [
            {
              "pset": "Pset_WindowCommon",
              "property": "IsEgress",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_WindowBaseQuantities",
          "quantity": "Height",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_egress_height_mm"
        }
      },
      "parameters": {
        "min_egress_height_mm": 610
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Egress windows must provide a minimum net clear opening height of 610 mm (24 in).",
        "on_fail": "Egress window {guid} has clear opening height {lhs} mm, below the required {rhs} mm (IRC R310.2.2).",
        "on_pass": "Egress window {guid} meets the minimum clear opening height ({lhs} mm \u2265 {rhs} mm, IRC R310.2.2)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "International Residential Code (IRC) 2021",
        "section": "R310.2.2",
        "title": "Minimum Opening Height",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "IRC"
        ]
      }
    },
    {
      "id": "IRC_EGRESS_WINDOW_MIN_WIDTH",
      "name": "Emergency Escape and Rescue Opening – Minimum Width",
      "rule_type": "attribute_comparison",
      "description": "Emergency escape and rescue openings must provide a minimum net clear opening width of 508 mm (20 inches) in accordance with IRC Section R310.2.3.",
      "target": {
        "ifc_class": "IfcWindow",
        "selector": {
          "filters": [
            {
              "pset": "Pset_WindowCommon",
              "property": "IsEgress",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_WindowBaseQuantities",
          "quantity": "Width",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_egress_width_mm"
        }
      },
      "parameters": {
        "min_egress_width_mm": 508
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Egress windows must provide a minimum net clear opening width of 508 mm (20 in).",
        "on_fail": "Egress window {guid} has clear opening width {lhs} mm, below the required {rhs} mm (IRC R310.2.3).",
        "on_pass": "Egress window {guid} meets the minimum clear opening width ({lhs} mm \u2265 {rhs} mm, IRC R310.2.3)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "International Residential Code (IRC) 2021",
        "section": "R310.2.3",
        "title": "Minimum Opening Width",
        "jurisdiction": "US",
        "jurisdiction_scope": [
          "US",
          "IRC"
        ]
      }
    },
    {
      "id": "UK_DOOR_WIDTH_ACCESSIBLE",
      "name": "UK Accessible Door Minimum Clear Width",
      "rule_type": "attribute_comparison",
      "description": "Accessible doors in dwellings must provide a minimum effective clear opening width of 775 mm in accordance with UK Building Regulations Approved Document M.",
      "target": {
        "ifc_class": "IfcDoor",
        "selector": {
          "filters": [
            {
              "pset": "Pset_DoorCommon",
              "property": "IsAccessible",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_DoorBaseQuantities",
          "quantity": "ClearWidth",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_width_mm"
        }
      },
      "parameters": {
        "min_width_mm": 775
      },
      "severity": "ERROR",
      "explanation": {
        "short": "UK regulations require an effective clear opening width of at least 775 mm for accessible doors in new dwellings.",
        "on_fail": "Accessible door {guid} has clear width {lhs} mm, below the UK requirement of {rhs} mm (Approved Document M).",
        "on_pass": "Accessible door {guid} meets the UK minimum clear width requirement ({lhs} mm \u2265 {rhs} mm, Approved Document M)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "UK Building Regulations – Approved Document M",
        "section": "Access to and Use of Buildings",
        "title": "Minimum Effective Clear Widths of Doors",
        "jurisdiction": "UK",
        "jurisdiction_scope": [
          "UK",
          "ADM"
        ]
      }
    },
    {
      "id": "CA_DOOR_WIDTH_ACCESSIBLE",
      "name": "Canadian Accessible Door Minimum Clear Width",
      "rule_type": "attribute_comparison",
      "description": "Doorways on accessible paths of travel must provide a minimum clear opening width of 850 mm in accordance with Canadian accessibility standards and National Building Code adaptations.",
      "target": {
        "ifc_class": "IfcDoor",
        "selector": {
          "filters": [
            {
              "pset": "Pset_DoorCommon",
              "property": "IsAccessible",
              "op": "=",
              "value": true
            }
          ]
        }
      },
      "condition": {
        "op": ">=",
        "lhs": {
          "source": "qto",
          "qto_name": "Qto_DoorBaseQuantities",
          "quantity": "ClearWidth",
          "unit": "mm"
        },
        "rhs": {
          "source": "parameter",
          "param": "min_width_mm"
        }
      },
      "parameters": {
        "min_width_mm": 850
      },
      "severity": "ERROR",
      "explanation": {
        "short": "Canadian accessibility guidance typically requires a minimum door clear opening width of 850 mm on accessible routes.",
        "on_fail": "Accessible door {guid} has clear width {lhs} mm, below the Canadian requirement of {rhs} mm (NBC/CSA B651).",
        "on_pass": "Accessible door {guid} meets the minimum Canadian clear width requirement ({lhs} mm \u2265 {rhs} mm, NBC/CSA B651)."
      },
      "provenance": {
        "source": "regulation",
        "regulation": "National Building Code of Canada + CSA B651",
        "section": "NBC 3.8 / CSA B651-18 5.2.1",
        "title": "Door Clear Opening Width",
        "jurisdiction": "CA",
        "jurisdiction_scope": [
          "CA",
          "NBC",
          "CSA B651"
        ]
      }
    }
  ],
  "metadata": {
    "version": "3.0",
    "description": "Compliance rules with explicit IFC class targeting, QTO sourcing, and parameterized explanations, aligned with selected ADA, IBC, IRC, UK and Canadian accessibility and habitability provisions.",
    "regulation_set": "2010 ADA Standards + IBC 2018 + IRC 2021 + UK Approved Document M + NBC/CSA B651",
    "jurisdictions": [
      "US",
      "UK",
      "CA"
    ],
    "categories": [
      "Accessibility",
      "Means of Egress",
      "Room Dimensions",
      "International Standards"
    ],
    "rule_types": [
      "attribute_comparison"
    ],
    "enhancements": [
      "Explicit IFC class targeting (IfcDoor, IfcSpace, IfcWindow, IfcStairFlight)",
      "QTO source differentiation",
      "Filtered selectors via Pset properties (IsAccessible, UsageType, IsEgress)",
      "Parameterized explanation messages with template variables",
      "Explicit unit specifications and jurisdiction scopes"
    ]
  }
}
